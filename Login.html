<!doctype html>
<link rel="stylesheet" href="Untitled-1.css">
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign in</title>
</head>
<body>
    <div class="image-container">
        <img src="gh_upscayl_5x_realesrgan-x4plus.jpg" alt="picture" style="height: 821px; width: 780px;">
      </div>
<div id="wrapper">
    <div id="header">
        <div class="ii">
            <img src="Снимок экрана 2025-01-25 215355-Photoroom.jpg" alt="" style="height: 150px; width: 220px;; margin-left: 50px;">
            </div>
    </div>
    <div id="container">
      <div id="content">
        <form id="registrationForm">
        <div class="sign">
<p style="font-family: SEGOE SCRIPT; font-size: 35px;">Start your journey!</p>
<p style="font-family: SANS-SERIF; font-size: 25px;">Sign in to THE APP</p>
<div class="inp" style="margin-top: 50px;">
    <i class="bi bi-envelope"></i>
    <input type="text" placeholder="test@example.com" id="email">
</div>   
<div class="inp2" style="margin-top: 30px;">
    <i class="bi bi-eye" id="togglePassword"></i>
    <input type="password" placeholder="Password..." id="password">
</div>
<div class="form-check" style="font-size: 19px; font-family: SANS-SERIF; margin-top: 15px;">
    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
    <label class="form-check-label" for="flexCheckDefault">
      Remember me
    </label>
  </div>
  <input class="btn btn-primary" type="submit" value="Sign in" style="width: 366px; margin-top: 25px; height: 40px;font-size: 15px; background-color: rgb(66, 157, 217); color: rgb(255, 255, 255); border-radius: 10px; border-color: rgb(12, 87, 174);"><bottom>
</div>
      </div>
    </div>
  </form>
    <div id="footer">
        <p style="font-size: 15px; font-family: SANS-SERIF; margin-left: 30px;"> Don't have an account? <a href="register.html" class="btn btn-link" style="color:rgb(80, 145, 231) ;">Sign up</a></p> 
       <a href="" class="btn btn-link" style="color:rgb(80, 145, 231);margin-left: 18px; font-family: SANS-SERIF;">Forgot passford?</a>
    </div>
  </div>
  <script src="index.js">
    const passwordInput = document.getElementById('password');
const togglePassword = document.getElementById('togglePassword');
togglePassword.addEventListener('click', function() {
    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
    passwordInput.setAttribute('type', type);
    this.classList.toggle('bi-eye');
    this.classList.toggle('bi-eye-slash');
});
  </script>
  <script type="module">
    document.getElementById('registrationForm').addEventListener('submit', async function(event) {
          event.preventDefault();
          const email = document.getElementById('email').value;
          const password = document.getElementById('password').value;

          const response = await fetch('/login', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json'
              },
              body: JSON.stringify({ email, password})
          });

          const result = await response.json();
          alert(result.message);
          if (response.ok) {
            const loginResponse = await fetch('/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password })
                });
                const loginResult = await loginResponse.json();
                if (loginResponse.ok) {
                 window.location.href = '/table.html';
             }
            else{
              console.log('Error ', result.message)
            }} else {
                console.log('Registration Error:', result.message);
            }
          })
  </script>
</body>
</html>